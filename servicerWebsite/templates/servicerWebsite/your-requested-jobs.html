{% extends "servicerWebsite/base.html" %}
{% load viewcomponent_tags %}

{% block title %}Jobs you want completed{% endblock title %}

{% block content %}
{% for jobname, offers in jobs.items %}
    <div class="section">
        <p class="title">{{ jobname }}</p>
        <p class="subtitle">Offers on job <em>{{ jobname }}</em></p>
        <div class="container narrow">
            {% component 'table' table_id='test' as table_test %}
                {% call table_test.cols %}
                    {% for col in cols %}
                        <td>{{ col }}</td>
                    {% endfor %}
                {% endcall %}
                {% call table_test.rows %}
                    {% comment %} Quadratic runtime, probably won't matter :P {% endcomment %}
                    {% for offer in offers %}
                        <tr>
                        {% for k, v in offer.items %}
                            {% for col in cols %}
                                {% if k == col %}
                                    <td>{{ v }}</td>
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                        <td class="has-text-right"><button class="button is-danger">See this user's requested jobs</button></td>
                        </tr>
                    {% endfor %}
                {% endcall %}
            {% endcomponent %}
        </div>
    </div>
{% endfor %}
{% endblock content %}